Bridge.define("LiveApp.App",{statics:{MAX_KEYSTROKES:10,INTERVAL_DELAY:1500,JS_HEADER_LINES:14,csEditor:null,jsEditor:null,keystrokes:0,timeout:0,config:{init:function(){Bridge.ready(this.main);$("#btnTranslate").on("click",this.translate);$("#btnRun").on("click",this.hookRunEvent);$("#btnShare").on("click",this.hookShareEvent);$("#offcanvas-toggle, .offcanvas-close-button, .overlay").on("click",this.offCanvasMenu)}},getHash:function(){return Bridge.global.location.hash},setHash:function(n){Bridge.global.location.hash=n},getHasHash:function(){return!Bridge.String.isNullOrEmpty(LiveApp.App.getHash())},getIsGistHash:function(){return LiveApp.App.getHasHash()&&!Bridge.String.startsWith(LiveApp.App.getHash(),"#example")},main:function(){LiveApp.App.initEditors();LiveApp.App.setEditorSize(null);Bridge.global.onresize=LiveApp.App.setEditorSize;LiveApp.App.loadExamples(!LiveApp.App.getHasHash());LiveApp.App.getIsGistHash()&&LiveApp.App.loadFromGist(LiveApp.App.getHash(),"https://api.github.com/gists/"+LiveApp.App.getHash().substr(1),!1)},loadExamples:function(n){$.ajax({url:"https://api.github.com/gists/fc03fa0d97097d4ceabe",type:"GET",cache:!1,success:function(t){for(var i=t.files,h=Bridge.global.Object.keys(i),f=n?i[h[0]].raw_url.toString():"",c=$("#examples"),l=1,r,e,o,s,u=Bridge.getEnumerator(h);u.moveNext();)r=u.getCurrent(),e="#example"+(l++).toString(),n||LiveApp.App.getHash()!==e||(f=i[r].raw_url.toString()),$("<li>").attr("role","presentation").append(Bridge.merge(document.createElement("a"),{href:i[r].raw_url.toString(),text:LiveApp.App.formatExampleFilename(i[r].filename.toString()),title:e,onclick:LiveApp.App.loadExample})).appendTo(c);Bridge.String.isNullOrEmpty(f)||(o=n?"#example1":LiveApp.App.getHash(),LiveApp.App.loadFromGist(o,f,!0),s=$("#examples > li > a[title='"+o+"']"),s.parent().addClass("active"),$("#filename").html(s.text()))}})},formatExampleFilename:function(n){var t=new RegExp("\\d\\.\\s(.*)").exec(n);return t!==null?t[1]:n},loadExample:function(n){n.preventDefault();LiveApp.App.loadFromGist($(this).attr("title"),$(this).attr("href"),!0);$("#examples > li").removeClass("active");$(this).parent().addClass("active");$("#filename").html($(this).text())},loadFromGist:function(n,t,i){$.ajax({url:t,type:"GET",cache:!1,success:function(t){if(i)LiveApp.App.csEditor.setValue(t,-1);else{var r=t.files,u=Bridge.global.Object.keys(r);LiveApp.App.csEditor.setValue(r[u[0]].content.toString(),-1)}LiveApp.App.translate();LiveApp.App.setHash(n)}})},initEditors:function(){var n=Bridge.global.ace;LiveApp.App.csEditor=n.edit("CsEditor");LiveApp.App.csEditor.renderer.setPadding(10);LiveApp.App.csEditor.renderer.setScrollMargin(13,13,13,13);LiveApp.App.csEditor.setTheme("ace/theme/terminal");LiveApp.App.csEditor.getSession().setMode("ace/mode/csharp");LiveApp.App.csEditor.setWrapBehavioursEnabled(!0);LiveApp.App.hookCsEditorKeyupEvent();LiveApp.App.hookCsEditorKeydownEvent();LiveApp.App.jsEditor=n.edit("JsEditor");LiveApp.App.jsEditor.renderer.setPadding(10);LiveApp.App.jsEditor.renderer.setScrollMargin(13,13,13,13);LiveApp.App.jsEditor.setTheme("ace/theme/terminal");LiveApp.App.jsEditor.getSession().setMode("ace/mode/javascript");LiveApp.App.jsEditor.setValue("")},translate:function(){$("#status").attr("src","resources/images/loader.gif").show();LiveApp.App.progress("Compiling...");$.ajax({url:"TranslateHandler.ashx?ajax=1",type:"POST",cache:!1,data:{cs:LiveApp.App.csEditor.getValue()},success:function(n){if(LiveApp.App.progress(null),Bridge.cast(n.Success,Boolean))LiveApp.App.jsEditor.setValue(n.JsCode,-1),$("#hash").text(n.Hash.toString()),$("#status").attr("src","resources/images/check.png"),LiveApp.App.progress("Compiled successfully!");else{var t=LiveApp.App.getErrorMessage(n.ErrorMessage.toString());LiveApp.App.jsEditor.setValue(t.toString(),-1);$("#hash").text("");$("#status").attr("src","resources/images/error.png");LiveApp.App.progress("Finished with error(s)")}}})},createPermaLink:function(n){if(LiveApp.App.getHasHash()){Bridge.global.alert("Shareable link already in the browser's address bar.");return}var t='{ "description": "live.bridge.net",  "public": true,"files": {   "livebridgenet.cs": {"content":'+JSON.stringify(n)+"  } }}";$.ajax({url:"https://api.github.com/gists",type:"POST",cache:!1,dataType:"json",data:t,success:function(n){LiveApp.App.setHash(n.id.toString());Bridge.global.alert("Shareable link now in the browser's address bar.")}})},getErrorMessage:function(n){var t=new RegExp("Line (\\d+), Col (\\d+)\\): (.*)","g").exec(n),r=n,i={v:0},u={v:0};return t!==null&&(Bridge.Int.tryParseInt(t[1],i,-2147483648,2147483647)&&(i.v=i.v-LiveApp.App.JS_HEADER_LINES),Bridge.Int.tryParseInt(t[2],u,-2147483648,2147483647),r=t[3]),Bridge.merge(new LiveApp.TranslateError,{setLine:i.v,setColumn:u.v,setMessage:r})},onTimeout:function(){LiveApp.App.translate();LiveApp.App.setHash("");$("#filename").html("")},hookCsEditorKeyupEvent:function(){$("#CsEditor").keyup(function(n){(n.which<37||n.which>40)&&(Bridge.global.clearTimeout(LiveApp.App.timeout),LiveApp.App.timeout=Bridge.global.setTimeout(LiveApp.App.onTimeout,LiveApp.App.INTERVAL_DELAY))})},hookCsEditorKeydownEvent:function(){$("#CsEditor").keydown(function(){Bridge.global.clearTimeout(LiveApp.App.timeout)})},hookRunEvent:function(n){n.preventDefault();window.open("run.html?h="+$("#hash").text())},hookShareEvent:function(n){n.preventDefault();LiveApp.App.createPermaLink(LiveApp.App.csEditor.getValue())},progress:function(n){var t=$("#progress");Bridge.String.isNullOrEmpty(n)?t.text(""):t.text(n)},setEditorSize:function(){var n=$("#masthead").outerHeight(),t=$("#title").outerHeight(),i=$(".code-description").outerHeight(),r=$(".site-footer").outerHeight(),u=window.innerHeight-(n+t+i+r+15);$(".ace_editor").css("height",u)},offCanvasMenu:function(n){n.preventDefault();$("#sidebar-offcanvas, .main-wrapper").toggleClass("active");$("body").toggleClass("offcanvas-open")}}});Bridge.define("LiveApp.TranslateError",{config:{properties:{Line:0,Column:0,Message:null}},toString:function(){return Bridge.String.format("// Line {0}, Col {1} : {2}",this.getLine().toString(),this.getColumn().toString(),this.getMessage())}})